{"version":3,"sources":["../../src/pages/service-info/service-info.module.ts","../../src/pages/service-info/service-info.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACC;AAUjD,IAAa,qBAAqB;IAAlC;IAAqC,CAAC;IAAD,4BAAC;AAAD,CAAC;AAAzB,qBAAqB;IARjC,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,sEAAe;SAChB;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,sEAAe,CAAC;SAC1C;KACF,CAAC;GACW,qBAAqB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACZQ;AAC2C;AACrF,wDAAwD;AACxD,+FAA+F;AAErC;AACE;AAE5D;;;;;GAKG;AAOH,IAAa,eAAe;IAqB1B,yBAAmB,OAAsB,EAAS,SAAoB,EAC5D,WAAwB,EAAU,YAA0B,EAC7D,SAA0B;QAFhB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAC5D,gBAAW,GAAX,WAAW,CAAa;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAC7D,cAAS,GAAT,SAAS,CAAiB;QAtBnC,qCAAqC;QACrC,OAAO;QACP,gBAAW,GAAQ,EAAE,CAAC;QAQtB,aAAQ,GAAY,KAAK,CAAC;QAM1B,UAAU;QACV,iBAAY,GAAG,qCAAqC,CAAC;QAOnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC/C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACvD,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,yCAAyC;QACzC,iDAAiD;QACjD,+CAA+C;QAC/C,sBAAsB;QACtB,wBAAwB;QACxB,KAAK;IACP,CAAC;IAED,wCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAC9C,6BAA6B;IAC/B,CAAC;IACD,gCAAM,GAAN;QACE,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QACxG,IAAI,IAAI,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;QACzC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IAChD,CAAC;IAED,kCAAQ,GAAR;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;QACnC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;QACtC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC;YAC9E,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;QAChD,CAAC;QACD,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,oCAAU,GAAV;QAAA,iBA+CC;QA9CC,yBAAyB;QACzB,uCAAuC;QACvC,wCAAwC;QACxC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CACrG,UAAC,MAAM;YACL,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;YACzC,uBAAuB;YACvB,iCAAiC;YACjC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;gBACpC,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CAC5E,UAAC,KAAK;oBACJ,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;oBACxC,sBAAsB;oBACtB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC5B,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;wBAChC,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,OAAO;4BAC1B,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OAAO;4BACxB,KAAI,CAAC,QAAQ,IAAI,OACnB,CAAC,CAAC,CAAC;4BACD,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;4BACxB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;wBACvB,CAAC;oBACH,CAAC;gBACH,CAAC,CACF,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;gBACxB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;oBACpC,KAAI,CAAC,gBAAgB,EAAE,CAAC;oBACxB,KAAI,CAAC,UAAU,EAAE,CAAC;gBACpB,CAAC;YACH,CAAC;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,yCAAe,GAAf;QAAA,iBAkBC;QAjBC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CAChF,UAAC,QAAQ;YACP,EAAE,CAAC,CAAC,KAAI,CAAC,cAAc,IAAI,SAAS,CAAC,CAAC,CAAC;gBACrC,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;gBAC7C,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACb,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,qCAAqC,IAAI,KAAI,CAAC,YAAY,IAAI,IAAI,IAAI,KAAI,CAAC,YAAY,IAAI,SAAS,CAAC,CAAC,CAAC;wBAC9H,EAAE,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC;4BACzD,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC;4BAC5D,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;4BACzE,KAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,KAAI,CAAC,YAAY,CAAC;wBAChD,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,oCAAU,GAAV;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IACD,SAAS;IACT,0CAAgB,GAAhB;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,aAAa;YACpB,iGAAiG;YACjG,OAAO,EAAE,wCAAwC;YACjD,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,4CAA4C;IAC5C,0CAAgB,GAAhB;QACE,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;QAC1C,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,SAAS,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;QAAC,CAAC;QAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,SAAS,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;QAAC,CAAC;QACpE,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QAAC,CAAC;IACpE,CAAC;IACH,sBAAC;AAAD,CAAC;AAtJY,eAAe;IAL3B,wEAAS,EAAE;IACX,wEAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;OACG;KACjC,CAAC;mKAsBsE;QAC/C,sEAAmC,EAAY;QAClD,YAAe;AA+HpC;SAtJY,eAAe,gB","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ServiceInfoPage } from './service-info';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ServiceInfoPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ServiceInfoPage),\r\n  ],\r\n})\r\nexport class ServiceInfoPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-info/service-info.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\n// import { Component, ViewChild } from '@angular/core';\r\n// import { IonicPage, NavController, NavParams, Navbar, AlertController} from 'ionic-angular';\r\n\r\nimport { SaleService } from '../../services/sale.service';\r\nimport { OfferService } from '../../services/offer.service';\r\n\r\n/**\r\n * Generated class for the ServiceInfoPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-service-info',\r\n  templateUrl: 'service-info.html',\r\n})\r\nexport class ServiceInfoPage {\r\n  // @ViewChild(Navbar) navBar: Navbar;\r\n  //-data\r\n  DataService: any = [];\r\n  userActual: any;\r\n  //-data view\r\n  imagenUser: any;\r\n  offer: any;\r\n  userName: any;\r\n  info: any;\r\n  contador: any;\r\n  NoGoSale: boolean = false;\r\n  //-sub\r\n  timerSubs: any;\r\n  statusSubs: any;\r\n  offerDetailSub: any;\r\n\r\n  //-default\r\n  serviceImage = 'assets/img/User/FotoServiceInfo.JPG';\r\n\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private saleService: SaleService, private offerService: OfferService,\r\n    public alertCtrl: AlertController,\r\n  ) {\r\n    this.DataService = this.navParams.get('datos');\r\n    console.log(this.DataService);\r\n    this.callInfo();\r\n    this.userActual = localStorage.getItem('verificacion');\r\n    this.LoadTimmer();\r\n    // this.navBar.setBackButtonText('hola');\r\n    // this.navBar.backButtonClick = this.goShowPage;\r\n    // this.navBar.backButtonClick = (e:UIEvent)=>{\r\n    //   // todo something\r\n    //   this.navCtrl.pop();\r\n    //  }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ServiceInfoPage');\r\n    // console.log(localStorage);\r\n  }\r\n  goSale() {\r\n    this.saleService.setSaleProvider(this.DataService.idUser, this.DataService.idOff, this.userActual, '-');\r\n    let Data = { 'datos': this.DataService };\r\n    this.navCtrl.setRoot('ServiceSalePage', Data);\r\n  }\r\n\r\n  callInfo() {\r\n    this.imagenUser = this.DataService.img;\r\n    this.offer = this.DataService.sale;\r\n    this.userName = this.DataService.name;\r\n    this.info = this.DataService.info;\r\n    if (this.DataService.imgOffer != undefined && this.DataService.imgOffer != '') {\r\n      this.serviceImage = this.DataService.imgOffer;\r\n    }\r\n    this.loadDescripcion();\r\n  }\r\n\r\n  LoadTimmer() {\r\n    // console.log('tiempo');\r\n    // console.log(this.DataService.idOff);\r\n    // console.log(this.DataService.idUser);\r\n    this.statusSubs = this.saleService.getStatus(this.DataService.idUser, this.DataService.idOff).subscribe(\r\n      (status) => {\r\n        console.log('statusSubs-S service-info');\r\n        // console.log(status);\r\n        // console.log(status['$value']);\r\n        if (status['$value'] == 'Published') {\r\n          this.timerSubs = this.offerService.getTimmer(this.DataService.idOff).subscribe(\r\n            (timer) => {\r\n              console.log('timerSubs-S service-info');\r\n              // console.log(timer);\r\n              if (timer['$value'] != null) {\r\n                this.contador = timer['$value'];\r\n                if (this.contador == \"00:15\" ||\r\n                  this.contador == \"00:14\" ||\r\n                  this.contador == \"00:13\" ||\r\n                  this.contador == \"00:12\" ||\r\n                  this.contador == \"00:10\" ||\r\n                  this.contador == \"00:09\" ||\r\n                  this.contador == \"00:08\" ||\r\n                  this.contador == \"00:07\" ||\r\n                  this.contador == \"00:06\" ||\r\n                  this.contador == \"00:05\" ||\r\n                  this.contador == \"00:04\" ||\r\n                  this.contador == \"00:03\" ||\r\n                  this.contador == \"00:02\" ||\r\n                  this.contador == \"00:01\"\r\n                ) {\r\n                  console.log('bloquear');\r\n                  this.NoGoSale = true;\r\n                }\r\n              }\r\n            }\r\n          );\r\n        } else {\r\n          this.contador = \"00:00\";\r\n          this.NoGoSale = true;\r\n          if (status['$value'] == 'Cancelled') {\r\n            this.AlertCancelOffer();\r\n            this.goShowPage();\r\n          }\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  loadDescripcion() {\r\n    this.offerDetailSub = this.offerService.getOffer(this.DataService.idOff).subscribe(\r\n      (DetailBD) => {\r\n        if (this.offerDetailSub != undefined) {\r\n          console.log('offerDetailSub-S service-info');\r\n          console.log(DetailBD);\r\n          if (DetailBD) {\r\n            if (this.serviceImage == 'assets/img/User/FotoServiceInfo.JPG' || this.serviceImage == null || this.serviceImage == undefined) {\r\n              if (DetailBD.Clasificacion.informacion.foto != undefined) {\r\n                this.serviceImage = DetailBD.Clasificacion.informacion.foto;\r\n                console.log(this.serviceImage = DetailBD.Clasificacion.informacion.foto);\r\n                this.DataService.imgOffer = this.serviceImage;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  goShowPage() {\r\n    this.navCtrl.setRoot('ShowPage');\r\n  }\r\n  //- alert\r\n  AlertCancelOffer() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Information',\r\n      // message: 'The auction was canceled by the Client :' + this.DataService.idOff + 'en info page',\r\n      message: 'The auction was canceled by the Client',\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  //terminamos las subscripciones con firebase\r\n  ionViewWillLeave() {\r\n    console.log('statusSubs-US service-info');\r\n    console.log('timerSubs-US service-info');\r\n    if (this.offerDetailSub != undefined) { this.offerDetailSub.unsubscribe(); }\r\n    if (this.statusSubs != undefined) { this.statusSubs.unsubscribe(); }\r\n    if (this.timerSubs != undefined) { this.timerSubs.unsubscribe(); }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-info/service-info.ts"],"sourceRoot":""}