{"version":3,"sources":["../../src/pages/service-new/service-new.module.ts","../../src/pages/service-new/service-new.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ServiceNewPage } from './service-new';\r\nimport { AgmCoreModule } from '@agm/core';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ServiceNewPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ServiceNewPage),\r\n    AgmCoreModule.forRoot({\r\n      apiKey: 'AIzaSyCVVePnunpdeDdD9fUNbLwYALneSYy2NPg'\r\n    }),\r\n  ],\r\n})\r\nexport class ServiceNewPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-new/service-new.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\n\r\n//-service\r\nimport { SaleService } from '../../services/sale.service';\r\nimport { OfferService } from '../../services/offer.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { ProfessionalsService } from '../../services/professionals.service';\r\n\r\n/**\r\n * Generated class for the ServiceNewPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-service-new',\r\n  templateUrl: 'service-new.html',\r\n})\r\nexport class ServiceNewPage {\r\n\r\n  //-- default\r\n  imgUserDefault = \"assets/img/User/UserService.png\";\r\n\r\n  //-datos BD\r\n  status = \"Waiting for the professional\";\r\n\r\n  //-data\r\n  DataService: any = [];\r\n  DataUser: any = [];\r\n  user: string;\r\n  keyOffer: any;\r\n  userActual: any;\r\n  serviceCode: any;\r\n\r\n  //-subcrip\r\n  userSubs: any;\r\n  OfferUserLocationSubs: any;\r\n  OfferProviderLocationSubs: any;\r\n\r\n  //--load vista\r\n  imgUser: any;\r\n  nameUser: any;\r\n  addresUser: any;\r\n  phoneUser: any;\r\n  //-map\r\n  Userlat: any = 37.09024;\r\n  Userlng: any = -95.71289100000001;\r\n  zom: number = 14;\r\n  providerLatitud: any = 37.09024;\r\n  providerLongitud: any = -95.71289100000001;\r\n\r\n\r\n  constructor(\r\n    public navCtrl: NavController, public navParams: NavParams,\r\n    private saleService: SaleService,\r\n    private offerService: OfferService,\r\n    private userService: UserService,\r\n    private professionalsService: ProfessionalsService,\r\n  ) {\r\n    //-ej\r\n    this.serviceCode = '0986548605';\r\n    //-data\r\n    this.DataService = this.navParams.get('datos');\r\n    console.log(this.DataService);\r\n    this.user = this.DataService['idUser'];\r\n    this.keyOffer = this.DataService['idOff'];\r\n    console.log(this.keyOffer);\r\n\r\n    this.serviceCode = this.DataService['idOff'].substring(6);\r\n    console.log(this.user);\r\n    //-localStorage\r\n    this.userActual = localStorage.getItem('verificacion');\r\n    console.log(this.userActual);\r\n    this.getUsersLocation();\r\n    this.userInfo();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ServiceNewPage');\r\n  }\r\n  goServiceJob() {\r\n    console.log('goServiceJob');\r\n    this.setStatusService();\r\n    // let DataService = {'datos':{\"dataService\":this.dataService,\"offer\":this.keyOffer,\"win\":this.worker}};\r\n    console.log(this.DataService);\r\n    console.log(this.DataUser);\r\n\r\n    console.log('userSubs-US service-new');\r\n    this.userSubs.unsubscribe();\r\n\r\n    let dataService = { 'service': this.DataService, \"user\": this.DataUser };\r\n    // this.navCtrl.setRoot(,DataService);\r\n    this.navCtrl.setRoot('ServiceJobPage', dataService);\r\n\r\n  }\r\n\r\n  setStatusService() {\r\n    console.log('set');\r\n    console.log(this.userActual);\r\n    console.log(this.keyOffer);\r\n    this.professionalsService.setContractStatus(this.userActual, this.keyOffer, 'In progress');\r\n    this.saleService.setStatus(this.user, this.keyOffer, 'In progress');\r\n    this.offerService.setStatus(this.keyOffer, 'In progress');\r\n  }\r\n  userInfo() {\r\n    // this.imgUser=this.imgUserDefault;\r\n    // this.nameUser = 'Alejandro Albello';\r\n    // this.addresUser = 'Calle 123 #45 - 65 Ed Miramar Apartamento BB Torre 2';\r\n    // this.phoneUser = '(+57) 5-300 811 45 65';\r\n    console.log('UserInfo');\r\n    console.log(this.user);\r\n    this.userSubs = this.userService.getUser(this.user).subscribe(\r\n      // this.userService.getUser(this.user).subscribe(\r\n      (userDB) => {\r\n        console.log('userSubs-S service-new');\r\n        console.log(userDB);\r\n        if (userDB) {\r\n          this.nameUser = userDB['user_username'];\r\n          // let addresU = userDB['user_address'];\r\n          // for(let key in addresU){\r\n          //   this.addresUser = addresU[key]['addr_info'];\r\n          // }\r\n\r\n          this.phoneUser = userDB['user_tel'];\r\n          console.log(userDB['user_picture']);\r\n          if (userDB['user_picture'] == undefined || userDB['user_picture'] == null || userDB['user_picture'] == \"\") {\r\n            this.imgUser = this.imgUserDefault;\r\n          } else {\r\n            this.imgUser = userDB['user_picture'];\r\n          }\r\n          let AddressOfferSubs = this.offerService.getOffer(this.keyOffer).subscribe(\r\n            (offerBD) => {\r\n              if (AddressOfferSubs) {\r\n                console.log(offerBD);\r\n                console.log(offerBD['Address']['name']);\r\n                console.log(offerBD['sale']);\r\n                if (offerBD['name']) {\r\n                  this.addresUser = offerBD['Address']['name'];\r\n                  this.DataUser = { \"nameUser\": this.nameUser, \"address\": this.addresUser, \"tel\": this.phoneUser, \"img\": this.imgUser, \"sale\": offerBD['sale'] };\r\n                }\r\n                AddressOfferSubs.unsubscribe();\r\n              }\r\n            }\r\n          );\r\n        }\r\n      });\r\n  }\r\n\r\n  getUsersLocation() {\r\n    this.OfferUserLocationSubs = this.offerService.getOfferUserLocation(this.keyOffer).subscribe(\r\n      (LocationUser) => {\r\n        console.log('OfferUserLocationSubs-S service-new');\r\n        console.info(LocationUser);\r\n        this.Userlat = LocationUser.latitud;\r\n        this.Userlng = LocationUser.longitud;\r\n        console.log(this.Userlat);\r\n        console.log(this.Userlng);\r\n        console.log('OfferUserLocationSubs-US service-new');\r\n        this.OfferUserLocationSubs.unsubscribe();\r\n      }\r\n    );\r\n    this.OfferProviderLocationSubs = this.offerService.getOfferProviderLocation(this.keyOffer).subscribe(\r\n      (LocationProvider) => {\r\n        console.log('OfferProviderLocationSubs-S service-new');\r\n        console.info(LocationProvider);\r\n        this.providerLatitud = LocationProvider.latitud;\r\n        this.providerLongitud = LocationProvider.longitud;\r\n        console.log(this.providerLatitud);\r\n        console.log(this.providerLongitud);\r\n        console.log('OfferProviderLocationSubs-US service-new');\r\n        this.OfferProviderLocationSubs.unsubscribe();\r\n      }\r\n    );\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-new/service-new.ts"],"sourceRoot":""}