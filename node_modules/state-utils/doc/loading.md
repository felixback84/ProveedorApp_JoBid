# Loading

A component that wants to display overall loading, registers a callback with the app.

Each state change results in the creation of a new ID. If a component is affected by the new ID it should add an expectedChunks value for its loading to the loading dict keyed by that ID and its name.

As each chunk is loaded, it calls back to the app to update its progress. The app can either tell it to stop bothering, because the state has changed again, or it can calculate a new percentage. Any callbacks registered will be told the new percentage so that they can render. 

In react, you can trigger a `getData(props, oldProps)` method like this:

~~~
  componentWillMount: function() {
    this.props.onEvent('lifecycle', 'willMount');
  },

  componentDidMount: function() {
    this.props.onEvent('lifecycle', 'didMount');
    this.getData(this.props, null);
  },

  componentWillReceiveProps: function(nextProps) {
    this.props.onEvent('lifecycle', 'willReceiveProps');
    this.getData(nextProps, this.props);
  },
~~~
